async function initMap(){const n="https://img.icons8.com/color/48/000000/marker--v1.png",a="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAABmJLR0QA/wD/AP+gvaeTAAAFDUlEQVRogdWZW2xUVRSGv3VmWtomBUwwJqUzQmGmFVDjJVYTookgAokSotEHE4OKhgQEwUtLpzUVWi6R8KQxGPtgTHioPAgPYAIBAxGU9MFIymVahHamNIhR0EBpO3OWD3JR7Dmzzsxg4v82Wf9a6/+z19lz9j7wP4cUq1Bbb1VE3PACVXe2iMwEosBEQIGLCH2qdDuih0JZ2dNQlzpXjL4FG9jYWz1fXWlQeBxwjGku6AEXZ1NLvH9fIf3zNrCxt3q+68oHwCOFCAA54sL7+RoJbGDT6ZoJbjbzsaIv5dPQCwqfl7hDbzbU/fJHkLxABtafro45WXaB1AWTZ8Zxx9FFa6ene60JZgPrTlTfGwrJXuCuvKTZMejizGmJ952wkE0GNp+MVGUcvgeqC5Jmx7mwuPUNsYF0LmLOXWNb10MlmRA7+e/EA1Rl1NnReoBwLmJOAxcqLzSjPFwcXYFQXzI5sjYXyXeENp2uimazoVNAmbWrCMdUpSMr7Cu/MnwWYKhi3JSQMhd0KTDLWgu4oqrx5tr0gBfBd4mymVADYhY/LMLqkempba2Ce0usG+juVD7qSUaWIWwFSg01KxzhPWCVF8FzBTafnFSZcSoGQCst4nHcBYnpAwcMXNafvPtJx3H3YDNxqXRoZPK795+/PFbQ8xkYdcrmGcWj8JZVPEBLXd9+VX3bSJ8wXFE61yvoaUCQpyzVRTiWiaU+NYq5gXg8/Yn8NVq5eyhPe8X8dqEHLMVdlc/GmPmceEHIqtBhIgv3eYX8DEy11HaE/N8mhb0WmrpM8+zvkzfeUnxkZKjfwhsL4cxQn4Unwh1eMT8DWUvx8pDm/Uo+FJpozR31CvgZ+NlSORuqiBhF/AslMhw1Uj21+BkwjYYqpt1q7GRjrornqHkbEL41qljaqYRs3JvoVEIoS01k0cNeIW8Drh4yapnVk4wsM3JvINkTXQ7MMJEFTy2eBiqdsv3Ab8YGW9tPReeYuMD6ZHSuoFuM9F9HR8Z7/st7GlgZ6x1WkR3GJqWI7m47Vb3Cb5w6lVBbMrrSQXcDJcbaX7bO7B7xCvpuYxuS1fWKfGdsdL1gtwodCHtHh6+eBSgZVzZFs8wT4TWsY3MNqlrfXJs+6tPPH+3JyCFgdpCmRcTBRDz1hB8h54lMhA+LpycYVCTnc2L6J2xPRg+DPla4pEA42hRLPSqC+pFMV4GKNhZHUwA4bmMu8WA00BxPHUTZWbgqI4SvrAck62UsoXB2JTDmsa7IuOJmnTVWstlA47Rz/SLSlp+mABBZ11LXd8ZKNxsAGEn3bwE5ElyVEULXpEt3bg2WEhAbk9EaF36wHvgD4LJk3Qeb7hlIBkkKtAIAa+P9PwHvBM3LBVFdHVQ8FPCBoz0Z2QU8k2/+36HK14l4aqFl27wVgVfgBsLh14HBvPNvYlBKwkvyEQ8FGEjUnDkv4j4HeL4pGjAqyouJmjPn8y2Q/woATbGBIyjmPftWiLCqqTZlPTiNXaOQ5OtoT0Y6gFeD5KjqF8216ZcL7V3QClxHebmuQOgyJwhdmdLwG8XoXRQDayLpIUadZ1G1XFQNhHEXt049e7UYvYtiACAxo29QHGchcNGH9juuLrR8+7KiaAYAmmL9x13RxYy9M42CPJ+oS/9YzJ5FNQDQEkt/A/oK/OPG2gVdkoj3my5zg6DoBgAS8fR2EVZc+6kKyxPx9Pbb0eu2YkNPtHFDT/S2nub+BDilnuUsAD9+AAAAAElFTkSuQmCC",t=new google.maps.Map(document.getElementById("map"),{zoom:12,center:{lat:41.0097636,lng:28.804111}});let e;sonuc?e=sonuc.data.data:await axios.get("/api/points").then(o=>{e=o.data.data}).catch(o=>console.log(o));let l=new Array,s=new Array,A;for(var i=0;i<e.length;i++){for(var g=0;g<e[i].slots.length;g++){if(!e[i].slots[g].isFull){A=!0;break}A=!1}A?l[i]=new google.maps.Marker({position:{lat:e[i].locationx,lng:e[i].locationy},map:t,title:e[i].name,icon:a}):l[i]=new google.maps.Marker({position:{lat:e[i].locationx,lng:e[i].locationy},map:t,title:e[i].name,icon:n}),l[i].index=i,l[i]._id=e[i]._id;let o;o="<div>\n",o+=e[i].name+"</br>",o+=`Charge Type: ${e[i].type}</br>`;for(g=0;g<e[i].slots.length;g++)o+="SlotName: "+e[i].slots[g].slotName,e[i].slots[g].isFull?o+='<span style="color:red;"> State: Full</span></br>':o+='<span style="color:green;"> State: Free</span></br>';o+="</div",s[i]=new google.maps.InfoWindow({content:o,maxWidth:300}),google.maps.event.addListener(l[i],"click",function(){s[this.index].open(t,l[this.index]),t.panTo(l[this.index].getPosition())})}socket.on("istasyon",o=>{console.log(o);for(var t=0;t<l.length;t++)if(l[t]._id==o._id){for(var e=0;e<o.slots.length;e++){if(!o.slots[e].isFull){A=!0;break}A=!1}console.log(A),A?l[t].setIcon(a):l[t].setIcon(n),content="<div>\n",content+=o.name+"</br>",content+=`Charge Type: ${o.type}</br>`;for(e=0;e<o.slots.length;e++)content+="SlotName: "+o.slots[e].slotName,o.slots[e].isFull?content+='<span style="color:red;"> State: Full</span></br>':content+='<span style="color:green;"> State: Free</span></br>';content+="</div",s[t].setContent(content)}})}